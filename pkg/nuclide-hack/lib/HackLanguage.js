Object.defineProperty(exports, '__esModule', {
  value: true
});

/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

exports.getCachedHackLanguageForUri = getCachedHackLanguageForUri;

var getHackLanguageForUri = _asyncToGenerator(function* (uri) {
  if (uri == null || uri.length === 0) {
    return null;
  }
  var key = getKeyOfUri(uri);
  if (key == null) {
    return null;
  }
  return yield createHackLanguageIfNotExisting(key, uri);
});

exports.getHackLanguageForUri = getHackLanguageForUri;

var createHackLanguageIfNotExisting = _asyncToGenerator(function* (key, fileUri) {
  if (!uriToHackLanguage.has(key)) {
    var hackEnvironment = yield (0, _utils.getHackEnvironmentDetails)(fileUri);

    // If multiple calls were done asynchronously, then return the single-created HackLanguage.
    if (!uriToHackLanguage.has(key)) {
      uriToHackLanguage.set(key, createHackLanguage(hackEnvironment.hackService, hackEnvironment.isAvailable, hackEnvironment.hackRoot));
    }
  }
  return uriToHackLanguage.get(key);
});

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }

var _ServerHackLanguage = require('./ServerHackLanguage');

var _nuclideRemoteConnection = require('../../nuclide-remote-connection');

var _nuclideRemoteUri = require('../../nuclide-remote-uri');

var _utils = require('./utils');

/**
 * The HackLanguage is the controller that servers language requests by trying to get worker results
 * and/or results from HackService (which would be executing hh_client on a supporting server)
 * and combining and/or selecting the results to give back to the requester.
 */

/**
 * This is responsible for managing (creating/disposing) multiple HackLanguage instances,
 * creating the designated HackService instances with the NuclideClient it needs per remote project.
 * Also, it deelegates the language feature request to the correct HackLanguage instance.
 */
var uriToHackLanguage = new Map();

// dummy key into uriToHackLanguage for local projects.
// Any non-remote NuclideUri will do.
// TODO: I suspect we should key the local service off of the presence of a .hhconfig file
// rather than having a single HackLanguage for all local requests. Regardless, we haven't tested
// local hack services so save that for another day.
var LOCAL_URI_KEY = 'local-hack-key';

function createHackLanguage(hackService, hhAvailable, basePath) {
  return new _ServerHackLanguage.ServerHackLanguage(hackService, hhAvailable, basePath);
}

// Returns null if we can't get the key at this time because the RemoteConnection is initializing.
// This can happen on startup when reloading remote files.
function getKeyOfUri(uri) {
  var remoteConnection = _nuclideRemoteConnection.RemoteConnection.getForUri(uri);
  return remoteConnection == null ? (0, _nuclideRemoteUri.isRemote)(uri) ? null : LOCAL_URI_KEY : remoteConnection.getUriForInitialWorkingDirectory();
}

function getCachedHackLanguageForUri(uri) {
  var key = getKeyOfUri(uri);
  return key == null ? null : uriToHackLanguage.get(uri);
}

// Range in the input where the symbol reference occurs.
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkhhY2tMYW5ndWFnZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztJQXNLc0IscUJBQXFCLHFCQUFwQyxXQUFxQyxHQUFnQixFQUEwQjtBQUNwRixNQUFJLEdBQUcsSUFBSSxJQUFJLElBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7QUFDbkMsV0FBTyxJQUFJLENBQUM7R0FDYjtBQUNELE1BQU0sR0FBRyxHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM3QixNQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUU7QUFDZixXQUFPLElBQUksQ0FBQztHQUNiO0FBQ0QsU0FBTyxNQUFNLCtCQUErQixDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztDQUN4RDs7OztJQUVjLCtCQUErQixxQkFBOUMsV0FDRSxHQUFXLEVBQ1gsT0FBbUIsRUFDSTtBQUN2QixNQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFO0FBQy9CLFFBQU0sZUFBZSxHQUFHLE1BQU0sc0NBQTBCLE9BQU8sQ0FBQyxDQUFDOzs7QUFHakUsUUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUMvQix1QkFBaUIsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUN2QixrQkFBa0IsQ0FDaEIsZUFBZSxDQUFDLFdBQVcsRUFDM0IsZUFBZSxDQUFDLFdBQVcsRUFDM0IsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7S0FDaEM7R0FDRjtBQUNELFNBQU8saUJBQWlCLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQ25DOzs7O2tDQTlLZ0Msc0JBQXNCOzt1Q0FDeEIsaUNBQWlDOztnQ0FDekMsMEJBQTBCOztxQkFDVCxTQUFTOzs7Ozs7Ozs7Ozs7O0FBZ0hqRCxJQUFNLGlCQUE0QyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7Ozs7Ozs7QUFPL0QsSUFBTSxhQUFhLEdBQUcsZ0JBQWdCLENBQUM7O0FBRXZDLFNBQVMsa0JBQWtCLENBQ3ZCLFdBQXdCLEVBQ3hCLFdBQW9CLEVBQ3BCLFFBQWlCLEVBQ0w7QUFDZCxTQUFPLDJDQUF1QixXQUFXLEVBQUUsV0FBVyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0NBQ25FOzs7O0FBSUQsU0FBUyxXQUFXLENBQUMsR0FBZSxFQUFXO0FBQzdDLE1BQU0sZ0JBQWdCLEdBQUcsMENBQWlCLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN6RCxTQUFPLGdCQUFnQixJQUFJLElBQUksR0FDNUIsZ0NBQVMsR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUFHLGFBQWEsR0FDckMsZ0JBQWdCLENBQUMsZ0NBQWdDLEVBQUUsQ0FBQztDQUN2RDs7QUFFTSxTQUFTLDJCQUEyQixDQUFDLEdBQWUsRUFBaUI7QUFDMUUsTUFBTSxHQUFHLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzdCLFNBQU8sR0FBRyxJQUFJLElBQUksR0FBRyxJQUFJLEdBQUcsaUJBQWlCLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQ3hEIiwiZmlsZSI6IkhhY2tMYW5ndWFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnO1xuLyogQGZsb3cgKi9cblxuLypcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBsaWNlbnNlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW5cbiAqIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCB0eXBlIHtOdWNsaWRlVXJpfSBmcm9tICcuLi8uLi9udWNsaWRlLXJlbW90ZS11cmknO1xuaW1wb3J0IHR5cGVvZiAqIGFzIEhhY2tTZXJ2aWNlIGZyb20gJy4uLy4uL251Y2xpZGUtaGFjay1iYXNlL2xpYi9IYWNrU2VydmljZSc7XG5pbXBvcnQgdHlwZSB7XG4gIEhhY2tEaWFnbm9zdGljLFxuICBIYWNrUmVmZXJlbmNlLFxuICBIYWNrT3V0bGluZSxcbn0gZnJvbSAnLi4vLi4vbnVjbGlkZS1oYWNrLWJhc2UvbGliL0hhY2tTZXJ2aWNlJztcbmltcG9ydCB0eXBlIHtUeXBlQ292ZXJhZ2VSZWdpb259IGZyb20gJy4vVHlwZWRSZWdpb25zJztcblxuaW1wb3J0IHtTZXJ2ZXJIYWNrTGFuZ3VhZ2V9IGZyb20gJy4vU2VydmVySGFja0xhbmd1YWdlJztcbmltcG9ydCB7UmVtb3RlQ29ubmVjdGlvbn0gZnJvbSAnLi4vLi4vbnVjbGlkZS1yZW1vdGUtY29ubmVjdGlvbic7XG5pbXBvcnQge2lzUmVtb3RlfSBmcm9tICcuLi8uLi9udWNsaWRlLXJlbW90ZS11cmknO1xuaW1wb3J0IHtnZXRIYWNrRW52aXJvbm1lbnREZXRhaWxzfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IHR5cGUgQ29tcGxldGlvblJlc3VsdCA9IHtcbiAgbWF0Y2hTbmlwcGV0OiBzdHJpbmc7XG4gIG1hdGNoVGV4dDogc3RyaW5nO1xuICBtYXRjaFR5cGU6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIERlZmluaXRpb25SZXN1bHQgPSB7XG4gIHBhdGg6IE51Y2xpZGVVcmk7XG4gIGxpbmU6IG51bWJlcjtcbiAgY29sdW1uOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgbGVuZ3RoOiBudW1iZXI7XG4gIHNjb3BlOiBzdHJpbmc7XG4gIGFkZGl0aW9uYWxJbmZvOiBzdHJpbmc7XG4gIHNlYXJjaFN0YXJ0Q29sdW1uPzogbnVtYmVyO1xuICBzZWFyY2hFbmRDb2x1bW4/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBEZWZpbml0aW9uID0ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHBhdGg6IE51Y2xpZGVVcmk7XG4gIGxpbmU6IG51bWJlcjtcbiAgY29sdW1uOiBudW1iZXI7XG4gIC8vIFJhbmdlIGluIHRoZSBpbnB1dCB3aGVyZSB0aGUgc3ltYm9sIHJlZmVyZW5jZSBvY2N1cnMuXG4gIHF1ZXJ5UmFuZ2U6IGF0b20kUmFuZ2U7XG59O1xuXG4vKipcbiAqIFRoZSBIYWNrTGFuZ3VhZ2UgaXMgdGhlIGNvbnRyb2xsZXIgdGhhdCBzZXJ2ZXJzIGxhbmd1YWdlIHJlcXVlc3RzIGJ5IHRyeWluZyB0byBnZXQgd29ya2VyIHJlc3VsdHNcbiAqIGFuZC9vciByZXN1bHRzIGZyb20gSGFja1NlcnZpY2UgKHdoaWNoIHdvdWxkIGJlIGV4ZWN1dGluZyBoaF9jbGllbnQgb24gYSBzdXBwb3J0aW5nIHNlcnZlcilcbiAqIGFuZCBjb21iaW5pbmcgYW5kL29yIHNlbGVjdGluZyB0aGUgcmVzdWx0cyB0byBnaXZlIGJhY2sgdG8gdGhlIHJlcXVlc3Rlci5cbiAqL1xuZXhwb3J0IHR5cGUgSGFja0xhbmd1YWdlICA9IHtcblxuICBkaXNwb3NlKCk6IHZvaWQ7XG5cbiAgZ2V0Q29tcGxldGlvbnMoXG4gICAgZmlsZVBhdGg6IE51Y2xpZGVVcmksXG4gICAgY29udGVudHM6IHN0cmluZyxcbiAgICBvZmZzZXQ6IG51bWJlclxuICApOiBQcm9taXNlPEFycmF5PENvbXBsZXRpb25SZXN1bHQ+PjtcblxuICBmb3JtYXRTb3VyY2UoXG4gICAgY29udGVudHM6IHN0cmluZyxcbiAgICBzdGFydFBvc2l0aW9uOiBudW1iZXIsXG4gICAgZW5kUG9zaXRpb246IG51bWJlcixcbiAgKTogUHJvbWlzZTxzdHJpbmc+O1xuXG4gIGhpZ2hsaWdodFNvdXJjZShcbiAgICBwYXRoOiBOdWNsaWRlVXJpLFxuICAgIGNvbnRlbnRzOiBzdHJpbmcsXG4gICAgbGluZTogbnVtYmVyLFxuICAgIGNvbDogbnVtYmVyLFxuICApOiBQcm9taXNlPEFycmF5PGF0b20kUmFuZ2U+PjtcblxuICBnZXREaWFnbm9zdGljcyhcbiAgICBwYXRoOiBOdWNsaWRlVXJpLFxuICAgIGNvbnRlbnRzOiBzdHJpbmcsXG4gICk6IFByb21pc2U8QXJyYXk8e21lc3NhZ2U6IEhhY2tEaWFnbm9zdGljO30+PjtcblxuICBnZXRUeXBlQ292ZXJhZ2UoXG4gICAgZmlsZVBhdGg6IE51Y2xpZGVVcmksXG4gICk6IFByb21pc2U8QXJyYXk8VHlwZUNvdmVyYWdlUmVnaW9uPj47XG5cbiAgZ2V0RGVmaW5pdGlvbihcbiAgICAgIGZpbGVQYXRoOiBOdWNsaWRlVXJpLFxuICAgICAgY29udGVudHM6IHN0cmluZyxcbiAgICAgIGxpbmVOdW1iZXI6IG51bWJlcixcbiAgICAgIGNvbHVtbjogbnVtYmVyLFxuICAgICAgbGluZVRleHQ6IHN0cmluZ1xuICAgICk6IFByb21pc2U8QXJyYXk8RGVmaW5pdGlvblJlc3VsdD4+O1xuXG4gIGdldElkZURlZmluaXRpb24oXG4gICAgICBmaWxlUGF0aDogTnVjbGlkZVVyaSxcbiAgICAgIGNvbnRlbnRzOiBzdHJpbmcsXG4gICAgICBsaW5lTnVtYmVyOiBudW1iZXIsXG4gICAgICBjb2x1bW46IG51bWJlclxuICAgICk6IFByb21pc2U8P0RlZmluaXRpb24+O1xuXG4gIGdldFR5cGUoXG4gICAgZmlsZVBhdGg6IE51Y2xpZGVVcmksXG4gICAgY29udGVudHM6IHN0cmluZyxcbiAgICBleHByZXNzaW9uOiBzdHJpbmcsXG4gICAgbGluZU51bWJlcjogbnVtYmVyLFxuICAgIGNvbHVtbjogbnVtYmVyLFxuICApOiBQcm9taXNlPD9zdHJpbmc+O1xuXG4gIGZpbmRSZWZlcmVuY2VzKFxuICAgIGZpbGVQYXRoOiBOdWNsaWRlVXJpLFxuICAgIGNvbnRlbnRzOiBzdHJpbmcsXG4gICAgbGluZTogbnVtYmVyLFxuICAgIGNvbHVtbjogbnVtYmVyXG4gICk6IFByb21pc2U8P3tiYXNlVXJpOiBzdHJpbmc7IHN5bWJvbE5hbWU6IHN0cmluZzsgcmVmZXJlbmNlczogQXJyYXk8SGFja1JlZmVyZW5jZT59PjtcblxuICBnZXRPdXRsaW5lKFxuICAgIGZpbGVQYXRoOiBOdWNsaWRlVXJpLFxuICAgIGNvbnRlbnRzOiBzdHJpbmcsXG4gICk6IFByb21pc2U8P0hhY2tPdXRsaW5lPjtcblxuICBnZXRCYXNlUGF0aCgpOiA/c3RyaW5nO1xuXG4gIGlzSGFja0F2YWlsYWJsZSgpOiBib29sZWFuO1xuXG59O1xuXG4vKipcbiAqIFRoaXMgaXMgcmVzcG9uc2libGUgZm9yIG1hbmFnaW5nIChjcmVhdGluZy9kaXNwb3NpbmcpIG11bHRpcGxlIEhhY2tMYW5ndWFnZSBpbnN0YW5jZXMsXG4gKiBjcmVhdGluZyB0aGUgZGVzaWduYXRlZCBIYWNrU2VydmljZSBpbnN0YW5jZXMgd2l0aCB0aGUgTnVjbGlkZUNsaWVudCBpdCBuZWVkcyBwZXIgcmVtb3RlIHByb2plY3QuXG4gKiBBbHNvLCBpdCBkZWVsZWdhdGVzIHRoZSBsYW5ndWFnZSBmZWF0dXJlIHJlcXVlc3QgdG8gdGhlIGNvcnJlY3QgSGFja0xhbmd1YWdlIGluc3RhbmNlLlxuICovXG5jb25zdCB1cmlUb0hhY2tMYW5ndWFnZTogTWFwPHN0cmluZywgSGFja0xhbmd1YWdlPiA9IG5ldyBNYXAoKTtcblxuLy8gZHVtbXkga2V5IGludG8gdXJpVG9IYWNrTGFuZ3VhZ2UgZm9yIGxvY2FsIHByb2plY3RzLlxuLy8gQW55IG5vbi1yZW1vdGUgTnVjbGlkZVVyaSB3aWxsIGRvLlxuLy8gVE9ETzogSSBzdXNwZWN0IHdlIHNob3VsZCBrZXkgdGhlIGxvY2FsIHNlcnZpY2Ugb2ZmIG9mIHRoZSBwcmVzZW5jZSBvZiBhIC5oaGNvbmZpZyBmaWxlXG4vLyByYXRoZXIgdGhhbiBoYXZpbmcgYSBzaW5nbGUgSGFja0xhbmd1YWdlIGZvciBhbGwgbG9jYWwgcmVxdWVzdHMuIFJlZ2FyZGxlc3MsIHdlIGhhdmVuJ3QgdGVzdGVkXG4vLyBsb2NhbCBoYWNrIHNlcnZpY2VzIHNvIHNhdmUgdGhhdCBmb3IgYW5vdGhlciBkYXkuXG5jb25zdCBMT0NBTF9VUklfS0VZID0gJ2xvY2FsLWhhY2sta2V5JztcblxuZnVuY3Rpb24gY3JlYXRlSGFja0xhbmd1YWdlKFxuICAgIGhhY2tTZXJ2aWNlOiBIYWNrU2VydmljZSxcbiAgICBoaEF2YWlsYWJsZTogYm9vbGVhbixcbiAgICBiYXNlUGF0aDogP3N0cmluZyxcbik6IEhhY2tMYW5ndWFnZSB7XG4gIHJldHVybiBuZXcgU2VydmVySGFja0xhbmd1YWdlKGhhY2tTZXJ2aWNlLCBoaEF2YWlsYWJsZSwgYmFzZVBhdGgpO1xufVxuXG4vLyBSZXR1cm5zIG51bGwgaWYgd2UgY2FuJ3QgZ2V0IHRoZSBrZXkgYXQgdGhpcyB0aW1lIGJlY2F1c2UgdGhlIFJlbW90ZUNvbm5lY3Rpb24gaXMgaW5pdGlhbGl6aW5nLlxuLy8gVGhpcyBjYW4gaGFwcGVuIG9uIHN0YXJ0dXAgd2hlbiByZWxvYWRpbmcgcmVtb3RlIGZpbGVzLlxuZnVuY3Rpb24gZ2V0S2V5T2ZVcmkodXJpOiBOdWNsaWRlVXJpKTogP3N0cmluZyB7XG4gIGNvbnN0IHJlbW90ZUNvbm5lY3Rpb24gPSBSZW1vdGVDb25uZWN0aW9uLmdldEZvclVyaSh1cmkpO1xuICByZXR1cm4gcmVtb3RlQ29ubmVjdGlvbiA9PSBudWxsID9cbiAgICAoaXNSZW1vdGUodXJpKSA/IG51bGwgOiBMT0NBTF9VUklfS0VZKSA6XG4gICAgcmVtb3RlQ29ubmVjdGlvbi5nZXRVcmlGb3JJbml0aWFsV29ya2luZ0RpcmVjdG9yeSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FjaGVkSGFja0xhbmd1YWdlRm9yVXJpKHVyaTogTnVjbGlkZVVyaSk6ID9IYWNrTGFuZ3VhZ2Uge1xuICBjb25zdCBrZXkgPSBnZXRLZXlPZlVyaSh1cmkpO1xuICByZXR1cm4ga2V5ID09IG51bGwgPyBudWxsIDogdXJpVG9IYWNrTGFuZ3VhZ2UuZ2V0KHVyaSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRIYWNrTGFuZ3VhZ2VGb3JVcmkodXJpOiA/TnVjbGlkZVVyaSk6IFByb21pc2U8P0hhY2tMYW5ndWFnZT4ge1xuICBpZiAodXJpID09IG51bGwgfHwgdXJpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IGtleSA9IGdldEtleU9mVXJpKHVyaSk7XG4gIGlmIChrZXkgPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBhd2FpdCBjcmVhdGVIYWNrTGFuZ3VhZ2VJZk5vdEV4aXN0aW5nKGtleSwgdXJpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlSGFja0xhbmd1YWdlSWZOb3RFeGlzdGluZyhcbiAga2V5OiBzdHJpbmcsXG4gIGZpbGVVcmk6IE51Y2xpZGVVcmksXG4pOiBQcm9taXNlPEhhY2tMYW5ndWFnZT4ge1xuICBpZiAoIXVyaVRvSGFja0xhbmd1YWdlLmhhcyhrZXkpKSB7XG4gICAgY29uc3QgaGFja0Vudmlyb25tZW50ID0gYXdhaXQgZ2V0SGFja0Vudmlyb25tZW50RGV0YWlscyhmaWxlVXJpKTtcblxuICAgIC8vIElmIG11bHRpcGxlIGNhbGxzIHdlcmUgZG9uZSBhc3luY2hyb25vdXNseSwgdGhlbiByZXR1cm4gdGhlIHNpbmdsZS1jcmVhdGVkIEhhY2tMYW5ndWFnZS5cbiAgICBpZiAoIXVyaVRvSGFja0xhbmd1YWdlLmhhcyhrZXkpKSB7XG4gICAgICB1cmlUb0hhY2tMYW5ndWFnZS5zZXQoa2V5LFxuICAgICAgICBjcmVhdGVIYWNrTGFuZ3VhZ2UoXG4gICAgICAgICAgaGFja0Vudmlyb25tZW50LmhhY2tTZXJ2aWNlLFxuICAgICAgICAgIGhhY2tFbnZpcm9ubWVudC5pc0F2YWlsYWJsZSxcbiAgICAgICAgICBoYWNrRW52aXJvbm1lbnQuaGFja1Jvb3QpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVyaVRvSGFja0xhbmd1YWdlLmdldChrZXkpO1xufVxuIl19